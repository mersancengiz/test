name: Java CI with Maven

on:
  push:
    branches: [ "main" ]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Change versions in files
      run: |
        set -e
        version_new="3.3."$((20+${{github.run_number}}))
        echo $version_new
        echo ${{secrets.TEST}}
        version=$(cat VERSION)
        echo $version
        sed -i -e 's/'$version'/'$version_new'/g' VERSION
    - name: Git Tasks
      run: |
        git config user.name "mersancengiz"
        git config user.email ersan.cengiz@iyzico.com
        git add .
        git commit -m "Test commit"
        git push origin master
